(()=>{let e=null;chrome.runtime.onMessage.addListener(((o,n,t)=>{"summarize_page"===o.action&&(console.log("Message received"),async function(o,n){try{return e||(e=await chrome.aiOriginTrial.languageModel.create(n)),console.log("Running prompt",o),e.prompt(o)}catch(o){throw console.error("Prompt failed:",o),async function(){e&&e.destroy(),e=null}(),o}}(`Generate 5 questions based on the key points of the following content: ${o.content}`,{temperature:.7,topK:5}).then((e=>{chrome.tabs.sendMessage(n.tab.id,{action:"display_summary",summary:e}),console.log("Summary sent",e)})).catch((e=>console.error("Error summarizing content:",e))))}))})();